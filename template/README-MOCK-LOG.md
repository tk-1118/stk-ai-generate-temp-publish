# Mock 请求日志功能说明

## 问题描述

在使用 `mockjs` 进行接口模拟时，由于 Mock 直接在 JavaScript 层面拦截 XMLHttpRequest 和 fetch 请求，不会发出真实的网络请求，因此浏览器的 Network 面板无法看到这些请求的日志记录。

## 解决方案

我们在 Mock 系统中添加了详细的控制台日志记录功能，模拟 Network 面板的效果，让开发者能够清楚地看到所有被 Mock 拦截的请求信息。

## 功能特性

### 1. 详细的请求日志记录

每个 Mock 请求都会在控制台输出详细信息：

- **请求方法**: GET、POST、PUT、DELETE 等，使用不同颜色区分
- **请求 URL**: 完整的请求路径
- **请求时间**: 精确到毫秒的时间戳
- **HTTP 状态码**: 响应状态码及状态文本
- **请求体**: POST/PUT 请求的请求参数
- **请求头**: 请求头信息（如果有）
- **响应数据**: 完整的响应数据
- **请求耗时**: 模拟的网络请求时间（100-500ms）

### 2. 美观的控制台输出

- 使用分组显示，便于查看
- 不同请求方法使用不同颜色
- 成功/失败状态使用不同颜色标识
- 类似 Network 面板的表格式摘要输出

### 3. 自动应用到所有 Mock 接口

所有现有的 Mock 接口都已更新，自动记录请求日志：

- 用户相关接口（登录、用户信息、用户列表等）
- 项目相关接口（项目列表、项目详情、项目注册等）
- 基础接口（成功响应、错误响应等）

## 使用方法

### 1. 查看日志

1. 打开浏览器开发者工具
2. 切换到 **Console** 面板
3. 发起任何 API 请求
4. 在控制台中查看详细的请求日志

### 2. 测试功能

访问 **API 测试** 页面（`/api-test`），使用 "Mock 日志测试" 部分的按钮：

- **测试 Mock 日志**: 发送多个请求展示日志效果
- **获取用户信息**: 测试 GET 请求日志
- **用户登录测试**: 测试 POST 请求日志

## 日志示例

```
[MOCK REQUEST] GET /api/user/info
⏰ Time: 14:30:25
📊 Status: 200 OK
📥 Response: {
  "code": 200,
  "success": true,
  "data": {
    "id": "123456",
    "name": "张三",
    "email": "zhangsan@example.com"
  },
  "msg": "获取用户信息成功"
}
⚡ Duration: 287ms (mocked)

GET    200  /api/user/info 287ms
```

## 技术实现

### 1. 日志记录函数

在 `src/mocks/mock-utils.ts` 中添加了 `logMockRequest` 函数，负责：

- 解析请求信息
- 格式化输出样式
- 记录详细日志信息

### 2. Mock 函数更新

所有 Mock 响应函数都已更新：

- `mockSuccess()` - 成功响应，自动记录日志
- `mockError()` - 错误响应，自动记录日志
- `mockAuthError()` - 权限错误，自动记录日志
- `mockServerError()` - 服务器错误，自动记录日志

### 3. 接口更新

所有 Mock 接口定义都已更新，传递 `options` 参数用于日志记录。

## 注意事项

1. **日志仅在开发环境显示**: Mock 功能仅在开发环境启用
2. **控制台查看**: 需要打开浏览器控制台才能看到日志
3. **不影响生产环境**: 生产环境使用真实接口，无 Mock 日志
4. **性能影响**: 日志记录对性能影响极小，仅在开发阶段使用

## 优势

1. **无需修改业务代码**: 透明地添加日志功能
2. **详细信息**: 比 Network 面板提供更多调试信息
3. **易于调试**: 清晰的日志格式便于问题排查
4. **开发友好**: 提升开发体验和调试效率

现在你可以在开发过程中清楚地看到所有 Mock 请求的详细信息，就像使用真实接口一样！
